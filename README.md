# 📦 MARigKit - Modular Avatar Rigging Toolkit

**MARigKit**は、Unityの**Modular Avatar**運用に最適化された、Blender用リギング支援ツールセットです。  
このツールは二つの独立したアドオンで構成され、不要なボーンの削除や、異なるアーマチュア間の動作同期をサポートします。

---

## コンセプト
- **最小構成化**でModular Avatarのパフォーマンス最適化を支援
- **作業効率化**のため、ポージングやウェイト確認時に2つのリグを完全にシンク
- **簡単操作**を重視し、直感的なUIとワンクリック実行を実現

---

## 📁 同梱アドオン

### 1. NH_BoneCleaner
> **不要なボーンと無効なウェイト情報を検出・削除するツール**

#### 主な機能
- 選択メッシュ群に対して、**ウェイトが無いボーン**を自動検出
- **ヒエラルキー保持オプション**で、必要な親ボーンを残すことも可能
- 選択ボーンを一括削除
- **未使用の頂点グループ**も一括クリーンアップ
- アーマチュアモディファイアは**共通名のもの**を対象に自動検出

#### 使用例
- Modular Avatar向けにリグを「最小ボーン構成化」して軽量化
- 不要なウェイトや頂点グループを削除してデータクリーンアップ

---

### 2. NH_SyncTransform
> **オリジナルアーマチュアとMA用アーマチュアの動作を完全シンクロ**

#### 主な機能
- **同名ボーン**間に
  - 回転（Rotation）
  - 位置（Location）
  - スケール（Scale）  
  を個別に同期する**コピーコンストレイント**を一括設定
- 任意のタイミングで**同期解除**も可能
- 同期対象ボーンは、ソース・ターゲット双方に存在するボーンのみ自動検出
- コンストレイントに固有の接頭辞をつけることで、**管理・削除が安全**

#### 使用例
- リファレンス用にオリジナルリグを保持しながら、MA用リグで正確なポージング・ウェイト確認を行う
- 大規模なリグ変更時に、ベースリグとMAリグの動作検証を高速化

---

## 💡 想定されるワークフロー

1. **BoneCleaner**を使って、オリジナルから**Modular Avatar用最小構成リグ**を作成  
2. **SyncTransform**で、オリジナルと最小構成リグの**ポージング・スケール・位置を同期**  
3. 確認・調整後、最終的に**不要ボーンや不要頂点グループを完全クリーンアップ**

これにより、作業効率とリグの最適化を同時に達成できます！

---

## 🛠️ インストール方法

1. [リリースページ]から最新バージョンの `.zip` ファイルをダウンロード
2. Blenderの「編集」>「プリファレンス」>「アドオン」>「インストール」から `.zip` を指定
3. 「Nylonheart」カテゴリにある「Bone Cleaner」と「Sync Transform」を有効化

---

## ⚙️ 対応バージョン
- Blender **4.4** 以上推奨

---

## 🧠 クレジット
- 開発：**Nylonheart**
- 協力：**ChatGPT & User**
